:80 {
  @finroot path /financetracker
  redir @finroot /financetracker/

  handle_path /financetracker/api/* {
    reverse_proxy financetracker-api:8080
  }

  handle_path /financetracker/* {
    reverse_proxy financetracker-web:5173
  }

  handle {
    respond "FinanceTracker gateway OK" 200
  }
}

# Prod later, real Domain + HTTPS
# chrispicloud.dev {
#   encode zstd gzip
#   handle_path /financetracker/api/* {
#     reverse_proxy financetracker-api:8080
#   }
#   handle /financetracker/* {
#     root * /srv/web
#     file_server
#     try_files {path} /financetracker/index.html
#   }
# }